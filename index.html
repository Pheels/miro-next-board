
<!DOCTYPE html>
<html lang="en">
<head>
    <script type="text/javascript" src="https://miro.com/app/static/sdk.1.1.js"></script>
    <script type="text/javascript">
    const underlineIcon = '<line x1="22" y1="22" x2="00" y2="22" stroke="currentColor" stroke-width="2"></line>'
    const nextBoardIcon = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M13.7072 15.7071L17.4143 12L13.7072 8.29289C13.3167 7.90237 12.6835 7.90237 12.293 8.29289C11.9025 8.68342 11.9025 9.31658 12.293 9.70711L14.5859 12L12.293 14.2929C11.9025 14.6834 11.9025 15.3166 12.293 15.7071C12.6835 16.0976 13.3167 16.0976 13.7072 15.7071Z" fill="#050038"/>
    <path d="M7.7072 15.7071L11.4143 12L7.7072 8.29289C7.31668 7.90237 6.68351 7.90237 6.29299 8.29289C5.90246 8.68342 5.90246 9.31658 6.29299 9.70711L8.58588 12L6.29299 14.2929C5.90246 14.6834 5.90246 15.3166 6.29299 15.7071C6.68351 16.0976 7.31668 16.0976 7.7072 15.7071Z" fill="#050038"/>
    </svg>`
    const previousBoardIcon = `<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M9.70711 8.29289L6 12L9.70711 15.7071C10.0976 16.0976 10.7308 16.0976 11.1213 15.7071C11.5118 15.3166 11.5118 14.6834 11.1213 14.2929L8.82843 12L11.1213 9.70711C11.5118 9.31658 11.5118 8.68342 11.1213 8.29289C10.7308 7.90237 10.0976 7.90237 9.70711 8.29289Z" fill="#050038"/>
    <path d="M15.7071 8.29289L12 12L15.7071 15.7071C16.0976 16.0976 16.7308 16.0976 17.1213 15.7071C17.5118 15.3166 17.5118 14.6834 17.1213 14.2929L14.8284 12L17.1213 9.70711C17.5118 9.31658 17.5118 8.68342 17.1213 8.29289C16.7308 7.90237 16.0976 7.90237 15.7071 8.29289Z" fill="#050038"/>
    </svg>`

    miro.onReady(() => {
        miro.initialize({
            extensionPoints: {
                getWidgetMenuItems: (widgets) => {
                    return Promise.resolve({
                        tooltip: 'Underline',
                        svgIcon: underlineIcon,
                        onClick: (widgets) => {
                            let widget = miro.board.widgets.get();
                            underline(widget)
                        }

                    })
                },
                bottomBar: async () => {
                    return {
                      title: 'Previous Board',
                      svgIcon: previousBoardIcon,
                      onClick: previousBoard
                    }
                },
                toolbar: {
                      title: 'Next Board',
                      toolbarSvgIcon: nextBoardIcon,
                      librarySvgIcon: nextBoardIcon,
                      onClick: nextBoard
                    }
                }
        })
    })
    function underline(widget) {
        widget.then(function(result) {
            console.log(result[0]);
            var textEdit = result[0]['text'];
            if (textEdit.includes("<u>")) {
                textEdit = textEdit.replace("<u>", "").replace("</u>", "");
            } else {
                textEdit = "<u>" + textEdit + "</u>"
            }
            miro.board.widgets.update({
                id: result[0]['id'],
                text: textEdit
            })
        });
    }

    function nextBoard(){
      console.log('next board')
    }

    function previousBoard(){
      console.log('previous board')
    }


    </script>
</head>
</html>
